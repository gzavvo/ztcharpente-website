let albums = [
    {
        title: "Réhabilitation d’une soue à cochon en chambre et salle-de-bain.",
        category: "charpente",
        miniature: "../img/charpente/tercillat/05-charpente-interieur.jpg",
        pictures: [
            "../img/charpente/tercillat/00-avant.jpg",
            "../img/charpente/tercillat/02-charpente-bois.jpg",
            "../img/charpente/tercillat/03-charpente-bois.jpg",
            "../img/charpente/tercillat/04-charpente-bois.jpg",
            "../img/charpente/tercillat/05-charpente-interieur.jpg",
            "../img/charpente/tercillat/06-chambre-charpente-interieur.jpg",
            "../img/charpente/tercillat/07-apres-exterieur.jpg"
        ]
    },
    {
        title: "Appentis en bois équarri à la hache.",
        miniature: "../img/charpente/aigurande/06-charpente-bois.jpg",
        category: "charpente",
        pictures: [
            "../img/charpente/aigurande/00-hache-poutre-equarrie.jpg",
            "../img/charpente/aigurande/01-poutres-equarries.jpg",
            "../img/charpente/aigurande/02-assemblages-charpente.jpg",
            "../img/charpente/aigurande/04-avant.jpg",
            "../img/charpente/aigurande/05-charpente-bois.jpg",
            "../img/charpente/aigurande/06-charpente-bois.jpg",
            "../img/charpente/aigurande/07-charpente-bois.jpg",
            "../img/charpente/aigurande/08-charpente-bois.jpg",
            "../img/charpente/aigurande/09-apres-charpente-bois.jpg",
            "../img/charpente/aigurande/10-signature.jpg"
        ]
    },
    {
        title: "Extension charpente traditionnelle.",
        category: "charpente",
        miniature: "../img/charpente/nouzerine/04-ossature-charpente-bois.jpg",
        pictures: [
            "../img/charpente/nouzerine/00-charpente-bois-epure.jpg",
            "../img/charpente/nouzerine/01-assemblage-charpente.jpg",
            "../img/charpente/nouzerine/02-charpente-bois.jpg",
            "../img/charpente/nouzerine/03-charpente-bois.jpg",
            "../img/charpente/nouzerine/04-ossature-charpente-bois.jpg"
        ]
    },
    {
        title: "Transformation de la charpente d’une grange.",
        category: "charpente",
        miniature: "../img/charpente/crevant/01-demolition-charpente.jpg",
        pictures: [
            "../img/charpente/crevant/00-demolition-charpente.jpg",
            "../img/charpente/crevant/01-demolition-charpente.jpg",
            "../img/charpente/crevant/02-demolition-charpente.jpg",
            "../img/charpente/crevant/03-charpente-ferme.jpg",
            "../img/charpente/crevant/04-charpente-ferme.jpg",
            "../img/charpente/crevant/05-charpente-ferme-panne.jpg"
        ]
    },
    {
        title: "Extension de maison en ossature bois.",
        category: "ossature",
        miniature: "../img/ossature/faux-la-montagne/04-apres-bardage-bois.jpg",
        pictures: [
            "../img/ossature/faux-la-montagne/01-solive-pare-vapeur.jpg",
            "../img/ossature/faux-la-montagne/02-isolation-exterieur.jpg",
            "../img/ossature/faux-la-montagne/03-isolation-exterieur-bardage-bois.jpg",
            "../img/ossature/faux-la-montagne/04-apres-bardage-bois.jpg"
        ]
    },
    {
        title: "Maison à ossature bois, remplissage paille, sur pilotis.",
        category: "ossature",
        miniature: "../img/ossature/brumas/05-apres.jpg",
        pictures: [
            "../img/ossature/brumas/00-exterieur.jpg",
            "../img/ossature/brumas/01-exterieur.jpg",
            "../img/ossature/brumas/02-exterieur-paysage.jpg",
            "../img/ossature/brumas/03-ossature-bois-interieur.jpg",
            "../img/ossature/brumas/04-ossature-bois-interieur.jpg",
            "../img/ossature/brumas/05-apres.jpg"
        ]
    },
    {
        title: "Bâtiment pour stockage de foin et atelier.",
        miniature: "../img/cabane/boussac-bourg1/04-bardage-bois.jpg",
        category: "ossature",
        pictures: [
            "../img/cabane/boussac-bourg1/00-ossature.jpg",
            "../img/cabane/boussac-bourg1/01-ossature-charpente.jpg",
            "../img/cabane/boussac-bourg1/02-charpente-couverture.jpg",
            "../img/cabane/boussac-bourg1/03-charpente-couverture-porte.jpg",
            "../img/cabane/boussac-bourg1/04-bardage-bois.jpg",
            "../img/cabane/boussac-bourg1/05-bardage-bois.jpg",
            "../img/cabane/boussac-bourg1/06-ossature-bois-interieur.jpg",
            "../img/cabane/boussac-bourg1/07-ossature-bois-interieur.jpg"
        ]
    },
    {
        title: "Abris à chevaux en charpente traditionnelle.",
        category: "cabane",
        miniature: "../img/cabane/betete1/03-charpente-abris.jpg",
        pictures: [
            "../img/cabane/betete1/00-portique.jpg",
            "../img/cabane/betete1/01-levage-portique.jpg",
            "../img/cabane/betete1/02-charpente.jpg",
            "../img/cabane/betete1/03-charpente-abris.jpg"
        ]
    },
    {
        title: "Réhabilitation d’Algeco en séchoir à plante.",
        category: "cabane",
        miniature: "../img/cabane/saint-marien/01-apres.jpg",
        pictures: [
            "../img/cabane/saint-marien/00-avant.jpg",
            "../img/cabane/saint-marien/01-apres.jpg"
        ]
    },
    {
        title: "Transformation d’une soue à cochons en abris à bois.",
        category: "cabane",
        miniature: "../img/cabane/betete2/02-apres.jpg",
        pictures: [
            "../img/cabane/betete2/00-ruine-avant.jpg",
            "../img/cabane/betete2/01-charpente.jpg",
            "../img/cabane/betete2/02-apres.jpg",
            "../img/cabane/betete2/03-apres.jpg"
        ]
    },
    {
        title: "Cabane insolite.",
        category: "cabane",
        miniature: "../img/cabane/boussac-bourg2/05-toiture-vegetale.jpg",
        pictures: [
            "../img/cabane/boussac-bourg2/00-pilotis.jpg",
            "../img/cabane/boussac-bourg2/01-arc-lamelle-visse.jpg",
            "../img/cabane/boussac-bourg2/02-plancher-ossature.jpg",
            "../img/cabane/boussac-bourg2/03-ossature-cabane.jpg",
            "../img/cabane/boussac-bourg2/05-toiture-vegetale.jpg",
            "../img/cabane/boussac-bourg2/06-cabane-interieur.jpg",
            "../img/cabane/boussac-bourg2/07-cabane-facade.jpg",
            "../img/cabane/boussac-bourg2/08-cabane-toiture-vegetale.jpg"
        ]
    }
];


let portfolio = document.querySelector("#portfolio");
let radios = document.getElementsByName("filter");

function createGallery() {
    for (let i = 0; i < albums.length; i++) {
        console.log(albums[i]);
        let newDiv = document.createElement("div");
        let newImg = document.createElement("img");
        let newTitle = document.createElement("p");

        newDiv.classList.add("miniature");
        newDiv.classList.add(albums[i].category);
        newDiv.value = albums[i];
        newImg.src = albums[i].miniature;
        newTitle.textContent = albums[i].title;

        newDiv.appendChild(newImg);
        newDiv.appendChild(newTitle);
        portfolio.appendChild(newDiv);
    }
}

function hideCategory(category) {
    let divsToHide = document.querySelectorAll(`.${category}`);
    for (let i = 0, length = divsToHide.length; i < length; i++) {
        divsToHide[i].style.display = "none";
    }
}

function showCategory(category) {
    let divsToHide = document.querySelectorAll(`.${category}`);
    for (let i = 0, length = divsToHide.length; i < length; i++) {
        divsToHide[i].style.display = "block";
    }
}

function getRadioValue() {
    for (var i = 0, length = radios.length; i < length; i++) {
        if (radios[i].checked) {
            return radios[i].value;
            break;
        }
    }
}

function removeNode(elementId) {
  let element = document.querySelector(`${elementId}`);
  element.parentNode.removeChild(element);
}

function removeChildren(elementId) {
    let element = document.querySelector(`${elementId}`);
    while (element.firstChild) {
        element.removeChild(element.firstChild);
    }
}

function openAlbum(albumObj) {
    removeNode("#portfolio");
    removeChildren("#filter");
    
    let workSection = document.querySelector("#works-section");
    let filter = document.querySelector("#filter");

    let imageViewer = document.createElement("div");
    let imgFullScreen = document.createElement("img");
    let pellicule = document.createElement("div");
    let backToGallery = document.createElement("a");

    imageViewer.id = "imageViewer";
    imgFullScreen.id = "fullscreen";
    imgFullScreen.src = albumObj.pictures[0];
    pellicule.id = "pellicule";
    backToGallery.textContent = "↩ Retour à la gallerie";
    backToGallery.href = "works.html";

    for (let i = 0; i < albumObj.pictures.length; i++) {
        let newImg = document.createElement("img");
        newImg.classList.add("imageList");
        newImg.src = albumObj.pictures[i];
        pellicule.appendChild(newImg);
    }

    filter.appendChild(backToGallery);
    imageViewer.appendChild(imgFullScreen);
    imageViewer.appendChild(pellicule);
    workSection.appendChild(imageViewer);

    let fullScreenImg = document.querySelector("#fullscreen");
    let images = document.querySelectorAll(".imageList");

    images.forEach(item => {
        item.addEventListener("click", event => {
            fullScreenImg.src = item.src;
        });
    });
}

// event listener for the filter div
for (var i = 0, length = radios.length; i < length; i++) {
    radios[i].addEventListener("change", function () {
        if (getRadioValue() === "all") {
            showCategory("miniature");
        } else {
            hideCategory("miniature");
            showCategory(getRadioValue());
        }
    });
}

// create the main gallery
createGallery();

// select all miniatures
let miniatures = document.querySelectorAll(".miniature");

// add event listener on miniatures

for ( let i = 0; i < miniatures.length; i++) {
    console.log(miniatures[i].value);
    miniatures[i].addEventListener("click", event => openAlbum(miniatures[i].value));
    //miniatures[i].addEventListener("click", event => alert("truc"));
};



